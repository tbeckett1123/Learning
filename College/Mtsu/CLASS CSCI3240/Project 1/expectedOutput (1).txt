00000000: 2f2a 204e 616d 653a 2009 5469 6d6f 7468  /* Name: .Timoth
00000010: 7920 4265 636b 6574 740a 202a 2050 726f  y Beckett. * Pro
00000020: 6a65 6374 3a09 310a 202a 2044 6573 6372  ject:.1. * Descr
00000030: 6970 7469 6f6e 3a20 5772 6974 6520 6120  iption: Write a 
00000040: 4320 7072 6f67 7261 6d20 7468 6174 2074  C program that t
00000050: 616b 6573 2061 2073 696e 676c 6520 636f  akes a single co
00000060: 6d6d 616e 642d 6c69 6e65 2061 7267 756d  mmand-line argum
00000070: 656e 7420 616e 6420 7072 6f64 7563 6573  ent and produces
00000080: 2074 6865 2073 616d 6520 6f75 7470 7574   the same output
00000090: 2061 7320 7468 6520 7878 6420 2020 0a20   as the xxd   . 
000000a0: 2a20 7072 6f67 7261 6d20 7769 7468 7468  * program withth
000000b0: 6520 7361 6d65 2061 7267 756d 656e 742e  e same argument.
000000c0: 2059 6f75 206d 7573 7420 696e 636c 7564   You must includ
000000d0: 6520 6d65 616e 696e 6766 756c 2063 6f6d  e meaningful com
000000e0: 6d65 6e74 7320 6f6e 2079 6f75 7220 636f  ments on your co
000000f0: 6465 2e20 596f 7520 6d75 7374 206e 616d  de. You must nam
00000100: 6520 796f 7572 2070 726f 6772 616d 2066  e your program f
00000110: 696c 6520 6173 200a 202a 2070 726f 6a65  ile as . * proje
00000120: 6374 312e 632e 200a 202a 202a 202a 202a  ct1.c. . * * * *
00000130: 202a 202a 202a 202a 202a 202a 202a 202a   * * * * * * * *
00000140: 202a 202a 202a 202a 202a 202a 202a 202a   * * * * * * * *
00000150: 202a 202a 202a 202a 202a 202a 202a 202a   * * * * * * * *
00000160: 202a 202a 202a 202a 202a 202a 202a 202a   * * * * * * * *
00000170: 202a 202a 202a 202a 202a 2f0a 2369 6e63   * * * * */.#inc
00000180: 6c75 6465 203c 7374 6469 6f2e 683e 0a23  lude <stdio.h>.#
00000190: 696e 636c 7564 6520 3c63 7479 7065 2e68  include <ctype.h
000001a0: 3e0a 0a76 6f69 6420 496e 6974 4172 7261  >..void InitArra
000001b0: 7928 696e 7420 7369 7a65 2c20 6368 6172  y(int size, char
000001c0: 2a20 6275 6666 6572 293b 0a0a 696e 7420  * buffer);..int 
000001d0: 6d61 696e 2869 6e74 2061 7267 632c 2063  main(int argc, c
000001e0: 6861 722a 2a20 6172 6776 290a 7b0a 2020  har** argv).{.  
000001f0: 2020 2f2f 204e 6f74 6520 7468 6174 2074    // Note that t
00000200: 6865 2066 6972 7374 2065 6c65 6d65 6e74  he first element
00000210: 2069 6e20 6172 6776 2069 7320 222e 2f50   in argv is "./P
00000220: 726f 6a65 6374 3122 2e20 2054 6865 2066  roject1".  The f
00000230: 696c 6520 6e61 6d65 2077 696c 6c20 6265  ile name will be
00000240: 2069 6e20 7468 6520 326e 6420 656c 656d   in the 2nd elem
00000250: 656e 742e 0a20 2020 2020 2020 200a 2020  ent..        .  
00000260: 2020 6368 6172 2069 6e70 7574 3b20 2020    char input;   
00000270: 200a 2020 2020 6368 6172 206f 7574 7075   .    char outpu
00000280: 745b 3137 5d3b 0a20 2020 2046 494c 452a  t[17];.    FILE*
00000290: 2066 696c 6550 7472 3b0a 2020 2020 696e   filePtr;.    in
000002a0: 7420 6c69 6e65 203d 2030 2c20 2f2f 206c  t line = 0, // l
000002b0: 696e 6520 636f 756e 7465 722e 0a20 2020  ine counter..   
000002c0: 2073 7061 6365 7220 3d20 302c 2020 202f   spacer = 0,   /
000002d0: 2f20 7472 6163 6b69 6e67 2073 7061 6365  / tracking space
000002e0: 7320 666f 7220 6865 7820 6475 6d70 2e20  s for hex dump. 
000002f0: 2020 200a 2020 2020 636f 756e 7420 3d20     .    count = 
00000300: 303b 2020 2020 2f2f 2074 7261 636b 696e  0;    // trackin
00000310: 6720 7468 6520 6368 6172 6163 7465 7220  g the character 
00000320: 636f 756e 7420 666f 7220 7468 6520 6c69  count for the li
00000330: 6e65 2e0a 2020 2020 2020 2020 0a20 2020  ne..        .   
00000340: 2066 696c 6550 7472 203d 2066 6f70 656e   filePtr = fopen
00000350: 2861 7267 765b 315d 2c20 2272 2229 3b0a  (argv[1], "r");.
00000360: 2020 2020 0a20 2020 2049 6e69 7441 7272      .    InitArr
00000370: 6179 2831 372c 206f 7574 7075 7429 3b0a  ay(17, output);.
00000380: 2020 2020 0a20 2020 202f 2f20 7072 696e      .    // prin
00000390: 7420 3173 7420 6c69 6e65 206c 696e 6520  t 1st line line 
000003a0: 6e75 6d62 6572 2e0a 2020 2020 7072 696e  number..    prin
000003b0: 7466 2822 2530 3778 303a 2022 2c20 6c69  tf("%07x0: ", li
000003c0: 6e65 293b 0a20 2020 200a 2020 2020 2f2f  ne);.    .    //
000003d0: 2072 6561 6420 6368 6172 6163 7465 7273   read characters
000003e0: 2074 696c 6c20 7468 6520 656e 6420 6f66   till the end of
000003f0: 2074 6865 2066 696c 652e 200a 2020 2020   the file. .    
00000400: 7768 696c 6528 6673 6361 6e66 2866 696c  while(fscanf(fil
00000410: 6550 7472 2c20 2225 6322 2c20 2669 6e70  ePtr, "%c", &inp
00000420: 7574 2920 213d 2045 4f46 290a 2020 2020  ut) != EOF).    
00000430: 7b0a 2020 2020 2020 2020 0a20 2020 2020  {.        .     
00000440: 2020 206f 7574 7075 745b 636f 756e 745d     output[count]
00000450: 203d 2069 6e70 7574 3b0a 2020 2020 2020   = input;.      
00000460: 2020 636f 756e 742b 2b3b 0a20 2020 2020    count++;.     
00000470: 2020 200a 2020 2020 2020 2020 2f2f 2068     .        // h
00000480: 616e 646c 696e 6720 6c69 6e65 2066 6565  andling line fee
00000490: 6473 0a20 2020 2020 2020 2069 6620 2869  ds.        if (i
000004a0: 6e70 7574 203d 3d20 3130 2920 0a20 2020  nput == 10) .   
000004b0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
000004c0: 2020 206f 7574 7075 745b 636f 756e 7420     output[count 
000004d0: 2d20 315d 203d 2027 2e27 3b0a 2020 2020  - 1] = '.';.    
000004e0: 2020 2020 2020 2020 7072 696e 7466 2822          printf("
000004f0: 3061 2229 3b0a 2020 2020 2020 2020 7d0a  0a");.        }.
00000500: 2020 2020 2020 2020 2f2f 2063 6865 636b          // check
00000510: 2069 6620 7072 696e 7461 626c 6520 6368   if printable ch
00000520: 6172 6163 7465 722e 0a20 2020 2020 2020  aracter..       
00000530: 2065 6c73 6520 6966 2028 2169 7370 7269   else if (!ispri
00000540: 6e74 2869 6e70 7574 2929 0a20 2020 2020  nt(input)).     
00000550: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
00000560: 2070 7269 6e74 6628 222e 2229 3b0a 2020   printf(".");.  
00000570: 2020 2020 2020 7d20 2020 2020 2020 2020        }         
00000580: 2020 2020 2020 200a 2020 2020 2020 2020         .        
00000590: 656c 7365 0a20 2020 2020 2020 207b 0a20  else.        {. 
000005a0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
000005b0: 6628 2225 7822 2c20 696e 7075 7429 3b0a  f("%x", input);.
000005c0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
000005d0: 2020 0a20 2020 2020 2020 202f 2f20 7072    .        // pr
000005e0: 696e 7420 6120 7370 6163 6520 6576 6572  int a space ever
000005f0: 7920 326e 6420 6368 6172 6163 7465 722e  y 2nd character.
00000600: 0a20 2020 2020 2020 2073 7061 6365 7220  .        spacer 
00000610: 3d20 2873 7061 6365 7220 2b20 3129 2025  = (spacer + 1) %
00000620: 2032 3b0a 2020 2020 2020 2020 2020 2020   2;.            
00000630: 0a20 2020 2020 2020 2069 6620 2873 7061  .        if (spa
00000640: 6365 7220 3d3d 2030 290a 2020 2020 2020  cer == 0).      
00000650: 2020 2020 2020 7072 696e 7466 2822 2022        printf(" "
00000660: 293b 0a20 2020 2020 2020 200a 2020 2020  );.        .    
00000670: 2020 2020 2f2f 2064 756d 7020 7468 6520      // dump the 
00000680: 6275 6666 6572 2061 6e64 2061 6476 616e  buffer and advan
00000690: 6365 2074 6f20 6120 6e65 7720 6c69 6e65  ce to a new line
000006a0: 2076 6572 7920 3136 7468 2063 6861 7261   very 16th chara
000006b0: 6374 6572 2e0a 2020 2020 2020 2020 6966  cter..        if
000006c0: 2028 636f 756e 7420 3d3d 2031 3629 0a20   (count == 16). 
000006d0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
000006e0: 2020 2020 206c 696e 652b 2b3b 0a20 2020       line++;.   
000006f0: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
00000700: 2220 2573 5c6e 2530 3778 303a 2022 2c20  " %s\n%07x0: ", 
00000710: 6f75 7470 7574 2c20 6c69 6e65 293b 0a20  output, line);. 
00000720: 2020 2020 2020 2020 2020 2063 6f75 6e74             count
00000730: 203d 2030 3b20 2020 2020 2020 2020 2020   = 0;           
00000740: 200a 2020 2020 2020 2020 2020 2020 496e   .            In
00000750: 6974 4172 7261 7928 3137 2c20 6f75 7470  itArray(17, outp
00000760: 7574 293b 0a20 2020 2020 2020 207d 2020  ut);.        }  
00000770: 2020 2020 2020 0a20 2020 207d 0a20 2020        .    }.   
00000780: 200a 2020 2020 6966 2028 636f 756e 7420   .    if (count 
00000790: 3c20 3136 290a 2020 2020 7b0a 2020 2020  < 16).    {.    
000007a0: 2020 2020 2f2f 2070 7269 6e74 2070 6c61      // print pla
000007b0: 6365 2068 6f6c 6465 7273 2074 6f20 6d61  ce holders to ma
000007c0: 696e 7461 696e 2066 6f72 6d61 7474 696e  intain formattin
000007d0: 6720 2020 2020 2020 200a 2020 2020 2020  g        .      
000007e0: 2020 666f 7220 2869 6e74 2069 203d 2031    for (int i = 1
000007f0: 3620 2d20 636f 756e 743b 2069 203e 2030  6 - count; i > 0
00000800: 3b20 6920 2d3d 2032 290a 2020 2020 2020  ; i -= 2).      
00000810: 2020 2020 2020 7072 696e 7466 2822 2020        printf("  
00000820: 2020 2022 293b 0a20 2020 2020 2020 2020     ");.         
00000830: 2020 2020 0a20 2020 2020 2020 2070 7269      .        pri
00000840: 6e74 6628 2220 2573 5c6e 222c 206f 7574  ntf(" %s\n", out
00000850: 7075 7429 3b20 2020 2020 2020 200a 2020  put);        .  
00000860: 2020 7d0a 2020 2020 2020 2020 0a20 2020    }.        .   
00000870: 2066 636c 6f73 6528 6669 6c65 5074 7229   fclose(filePtr)
00000880: 3b0a 2020 2020 0a20 2020 2072 6574 7572  ;.    .    retur
00000890: 6e20 303b 0a7d 0a0a 766f 6964 2049 6e69  n 0;.}..void Ini
000008a0: 7441 7272 6179 2869 6e74 2073 697a 652c  tArray(int size,
000008b0: 2063 6861 722a 2062 7566 6665 7229 0a7b   char* buffer).{
000008c0: 0a20 2020 2066 6f72 2028 696e 7420 6920  .    for (int i 
000008d0: 3d20 303b 2069 203c 2073 697a 653b 2069  = 0; i < size; i
000008e0: 2b2b 290a 2020 2020 2020 2020 6275 6666  ++).        buff
000008f0: 6572 5b69 5d20 3d20 275c 3027 3b0a 7d    er[i] = '\0';.}
